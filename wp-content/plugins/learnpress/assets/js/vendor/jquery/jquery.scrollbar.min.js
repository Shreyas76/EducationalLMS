!function(l,e){"function"==typeof define&&define.amd?define(["jquery"],e):e(l.jQuery)}(this,function(m){"use strict";var d={data:{index:0,name:"scrollbar"},macosx:/mac/i.test(navigator.platform),mobile:/android|webos|iphone|ipad|ipod|blackberry/i.test(navigator.userAgent),overlay:null,scroll:null,scrolls:[],webkit:/webkit/i.test(navigator.userAgent)&&!/edge\/\d+/i.test(navigator.userAgent)};d.scrolls.add=function(l){this.remove(l).push(l)};function l(l){d.scroll||(d.overlay=function(){var l=t(!0);return!(l.height||l.width)}(),d.scroll=t(),a(),m(window).resize(function(){var l=!1;if(d.scroll&&(d.scroll.height||d.scroll.width)){var e=t();e.height===d.scroll.height&&e.width===d.scroll.width||(d.scroll=e,l=!0)}a(l)})),this.container=l,this.namespace=".scrollbar_"+d.data.index++,this.options=m.extend({},o,window.jQueryScrollbarOptions||{}),this.scrollTo=null,this.scrollx={},this.scrolly={},l.data(d.data.name,this),d.scrolls.add(this)}var o={autoScrollSize:!0,autoUpdate:!0,debug:!(d.scrolls.remove=function(l){for(;0<=m.inArray(l,this);)this.splice(m.inArray(l,this),1);return this}),disableBodyScroll:!1,duration:200,ignoreMobile:!1,ignoreOverlay:!1,scrollStep:30,showArrows:!1,stepScrolling:!0,scrollx:null,scrolly:null,onDestroy:null,onInit:null,onScroll:null,onUpdate:null};l.prototype={destroy:function(){if(this.wrapper){this.container.removeData(d.data.name),d.scrolls.remove(this);var l=this.container.scrollLeft(),e=this.container.scrollTop();this.container.insertBefore(this.wrapper).css({height:"",margin:"","max-height":""}).removeClass("scroll-content scroll-scrollx_visible scroll-scrolly_visible").off(this.namespace).scrollLeft(l).scrollTop(e),this.scrollx.scroll.removeClass("scroll-scrollx_visible").find("div").andSelf().off(this.namespace),this.scrolly.scroll.removeClass("scroll-scrolly_visible").find("div").andSelf().off(this.namespace),this.wrapper.remove(),m(document).add("body").off(this.namespace),m.isFunction(this.options.onDestroy)&&this.options.onDestroy.apply(this,[this.container])}},init:function(l){var p=this,u=this.container,r=this.containerWrapper||u,f=this.namespace,v=m.extend(this.options,l||{}),b={x:this.scrollx,y:this.scrolly},o=this.wrapper,e={scrollLeft:u.scrollLeft(),scrollTop:u.scrollTop()};if(d.mobile&&v.ignoreMobile||d.overlay&&v.ignoreOverlay||d.macosx&&d.webkit,o)r.css({height:"auto","margin-bottom":-1*d.scroll.height+"px","margin-right":-1*d.scroll.width+"px","max-height":""});else{if(this.wrapper=o=m("<div>").addClass("scroll-wrapper").addClass(u.attr("class")).css("position","absolute"==u.css("position")?"absolute":"relative").insertBefore(u).append(u),u.is("textarea")&&(this.containerWrapper=r=m("<div>").insertBefore(u).append(u),o.addClass("scroll-textarea")),r.addClass("scroll-content").css({height:"auto","margin-bottom":-1*d.scroll.height+"px","margin-right":-1*d.scroll.width+"px","max-height":""}),u.on("scroll"+f,function(l){m.isFunction(v.onScroll)&&v.onScroll.call(p,{maxScroll:b.y.maxScrollOffset,scroll:u.scrollTop(),size:b.y.size,visible:b.y.visible},{maxScroll:b.x.maxScrollOffset,scroll:u.scrollLeft(),size:b.x.size,visible:b.x.visible}),b.x.isVisible&&b.x.scroll.bar.css("left",u.scrollLeft()*b.x.kx+"px"),b.y.isVisible&&b.y.scroll.bar.css("top",u.scrollTop()*b.y.kx+"px")}),o.on("scroll"+f,function(){o.scrollTop(0).scrollLeft(0)}),v.disableBodyScroll){var s=function(l){g(l)?b.y.isVisible&&b.y.mousewheel(l):b.x.isVisible&&b.x.mousewheel(l)};o.on("MozMousePixelScroll"+f,s),o.on("mousewheel"+f,s),d.mobile&&o.on("touchstart"+f,function(l){var e=l.originalEvent.touches&&l.originalEvent.touches[0]||l,o=e.pageX,s=e.pageY,r=u.scrollLeft(),t=u.scrollTop();m(document).on("touchmove"+f,function(l){var e=l.originalEvent.targetTouches&&l.originalEvent.targetTouches[0]||l;u.scrollLeft(r+o-e.pageX),u.scrollTop(t+s-e.pageY),l.preventDefault()}),m(document).on("touchend"+f,function(){m(document).off(f)})})}m.isFunction(v.onInit)&&v.onInit.apply(this,[u])}m.each(b,function(r,t){function i(){var l=u[a]();u[a](l+d),1==c&&h<=l+d&&(l=u[a]()),-1==c&&l+d<=h&&(l=u[a]()),u[a]()==l&&n&&n()}var n=null,c=1,a="x"===r?"scrollLeft":"scrollTop",d=v.scrollStep,h=0;t.scroll||(t.scroll=p._getScroll(v["scroll"+r]).addClass("scroll-"+r),v.showArrows&&t.scroll.addClass("scroll-element_arrows_visible"),t.mousewheel=function(l){if(!t.isVisible||"x"===r&&g(l))return!0;if("y"===r&&!g(l))return b.x.mousewheel(l),!0;var e=-1*l.originalEvent.wheelDelta||l.originalEvent.detail,o=t.size-t.visible-t.offset;return(0<e&&h<o||e<0&&0<h)&&((h+=e)<0&&(h=0),o<h&&(h=o),p.scrollTo=p.scrollTo||{},p.scrollTo[a]=h,setTimeout(function(){p.scrollTo&&(u.stop().animate(p.scrollTo,240,"linear",function(){h=u[a]()}),p.scrollTo=null)},1)),l.preventDefault(),!1},t.scroll.on("MozMousePixelScroll"+f,t.mousewheel).on("mousewheel"+f,t.mousewheel).on("mouseenter"+f,function(){h=u[a]()}),t.scroll.find(".scroll-arrow, .scroll-element_track").on("mousedown"+f,function(l){if(1!=l.which)return!0;c=1;var e={eventOffset:l["x"===r?"pageX":"pageY"],maxScrollValue:t.size-t.visible-t.offset,scrollbarOffset:t.scroll.bar.offset()["x"===r?"left":"top"],scrollbarSize:t.scroll.bar["x"===r?"outerWidth":"outerHeight"]()},o=0,s=0;return h=m(this).hasClass("scroll-arrow")?(c=m(this).hasClass("scroll-arrow_more")?1:-1,d=v.scrollStep*c,0<c?e.maxScrollValue:0):(c=e.scrollbarOffset+e.scrollbarSize<e.eventOffset?1:e.eventOffset<e.scrollbarOffset?-1:0,d=Math.round(.75*t.visible)*c,h=e.eventOffset-e.scrollbarOffset-(v.stepScrolling?1==c?e.scrollbarSize:0:Math.round(e.scrollbarSize/2)),u[a]()+h/t.kx),p.scrollTo=p.scrollTo||{},p.scrollTo[a]=v.stepScrolling?u[a]()+d:h,v.stepScrolling&&(n=function(){h=u[a](),clearInterval(s),clearTimeout(o),s=o=0},o=setTimeout(function(){s=setInterval(i,40)},v.duration+100)),setTimeout(function(){p.scrollTo&&(u.animate(p.scrollTo,v.duration),p.scrollTo=null)},1),p._handleMouseDown(n,l)}),t.scroll.bar.on("mousedown"+f,function(l){if(1!=l.which)return!0;var o=l["x"===r?"pageX":"pageY"],s=u[a]();return t.scroll.addClass("scroll-draggable"),m(document).on("mousemove"+f,function(l){var e=parseInt((l["x"===r?"pageX":"pageY"]-o)/t.kx,10);u[a](s+e)}),p._handleMouseDown(function(){t.scroll.removeClass("scroll-draggable"),h=u[a]()},l)}))}),m.each(b,function(l,e){var o="scroll-scroll"+l+"_visible",s="x"==l?b.y:b.x;e.scroll.removeClass(o),s.scroll.removeClass(o),r.removeClass(o)}),m.each(b,function(l,e){m.extend(e,"x"==l?{offset:parseInt(u.css("left"),10)||0,size:u.prop("scrollWidth"),visible:o.width()}:{offset:parseInt(u.css("top"),10)||0,size:u.prop("scrollHeight"),visible:o.height()})}),this._updateScroll("x",this.scrollx),this._updateScroll("y",this.scrolly),m.isFunction(v.onUpdate)&&v.onUpdate.apply(this,[u]),m.each(b,function(l,e){var o="x"===l?"left":"top",s="x"===l?"outerWidth":"outerHeight",r="x"===l?"width":"height",t=parseInt(u.css(o),10)||0,i=e.size,n=e.visible+t,c=e.scroll.size[s]()+(parseInt(e.scroll.size.css(o),10)||0);v.autoScrollSize&&(e.scrollbarSize=parseInt(c*n/i,10),e.scroll.bar.css(r,e.scrollbarSize+"px")),e.scrollbarSize=e.scroll.bar[s](),e.kx=(c-e.scrollbarSize)/(i-n)||1,e.maxScrollOffset=i-n}),u.scrollLeft(e.scrollLeft).scrollTop(e.scrollTop).trigger("scroll")},_getScroll:function(l){var e={advanced:['<div class="scroll-element">','<div class="scroll-element_corner"></div>','<div class="scroll-arrow scroll-arrow_less"></div>','<div class="scroll-arrow scroll-arrow_more"></div>','<div class="scroll-element_outer">','<div class="scroll-element_size"></div>','<div class="scroll-element_inner-wrapper">','<div class="scroll-element_inner scroll-element_track">','<div class="scroll-element_inner-bottom"></div>',"</div>","</div>",'<div class="scroll-bar">','<div class="scroll-bar_body">','<div class="scroll-bar_body-inner"></div>',"</div>",'<div class="scroll-bar_bottom"></div>','<div class="scroll-bar_center"></div>',"</div>","</div>","</div>"].join(""),simple:['<div class="scroll-element">','<div class="scroll-element_outer">','<div class="scroll-element_size"></div>','<div class="scroll-element_track"></div>','<div class="scroll-bar"></div>',"</div>","</div>"].join("")};return e[l]&&(l=e[l]),l="string"==typeof(l=l||e.simple)?m(l).appendTo(this.wrapper):m(l),m.extend(l,{bar:l.find(".scroll-bar"),size:l.find(".scroll-element_size"),track:l.find(".scroll-element_track")}),l},_handleMouseDown:function(l,e){var o=this.namespace;return m(document).on("blur"+o,function(){m(document).add("body").off(o),l&&l()}),m(document).on("dragstart"+o,function(l){return l.preventDefault(),!1}),m(document).on("mouseup"+o,function(){m(document).add("body").off(o),l&&l()}),m("body").on("selectstart"+o,function(l){return l.preventDefault(),!1}),e&&e.preventDefault(),!1},_updateScroll:function(l,e){var o=this.container,s=this.containerWrapper||o,r="scroll-scroll"+l+"_visible",t="x"===l?this.scrolly:this.scrollx,i=parseInt(this.container.css("x"===l?"left":"top"),10)||0,n=this.wrapper,c=e.size,a=e.visible+i;e.isVisible=1<c-a,e.isVisible?(e.scroll.addClass(r),t.scroll.addClass(r),s.addClass(r)):(e.scroll.removeClass(r),t.scroll.removeClass(r),s.removeClass(r)),"y"===l&&(o.is("textarea")||c<a?s.css({height:a+d.scroll.height+"px","max-height":"none"}):s.css({"max-height":a+d.scroll.height+"px"})),e.size==o.prop("scrollWidth")&&t.size==o.prop("scrollHeight")&&e.visible==n.width()&&t.visible==n.height()&&e.offset==(parseInt(o.css("left"),10)||0)&&t.offset==(parseInt(o.css("top"),10)||0)||(m.extend(this.scrollx,{offset:parseInt(o.css("left"),10)||0,size:o.prop("scrollWidth"),visible:n.width()}),m.extend(this.scrolly,{offset:parseInt(o.css("top"),10)||0,size:this.container.prop("scrollHeight"),visible:n.height()}),this._updateScroll("x"===l?"y":"x",t))}};var r=l;m.fn.scrollbar=function(o,s){return"string"!=typeof o&&(s=o,o="init"),void 0===s&&(s=[]),m.isArray(s)||(s=[s]),this.not("body, .scroll-wrapper").each(function(){var l=m(this),e=l.data(d.data.name);(e||"init"===o)&&(e=e||new r(l))[o]&&e[o].apply(e,s)}),this},m.fn.scrollbar.options=o;var c,s,a=(c=0,function(l){var e,o,s,r,t,i,n;for(e=0;e<d.scrolls.length;e++)o=(r=d.scrolls[e]).container,s=r.options,t=r.wrapper,i=r.scrollx,n=r.scrolly,(l||s.autoUpdate&&t&&t.is(":visible")&&(o.prop("scrollWidth")!=i.size||o.prop("scrollHeight")!=n.size||t.width()!=i.visible||t.height()!=n.visible))&&(r.init(),!s.debug||window.console&&console.log({scrollHeight:o.prop("scrollHeight")+":"+r.scrolly.size,scrollWidth:o.prop("scrollWidth")+":"+r.scrollx.size,visibleHeight:t.height()+":"+r.scrolly.visible,visibleWidth:t.width()+":"+r.scrollx.visible},!0));clearTimeout(c),c=setTimeout(a,300)});function t(l){if(d.webkit&&!l)return{height:0,width:0};if(!d.data.outer){var e={border:"none","box-sizing":"content-box",height:"200px",margin:"0",padding:"0",width:"200px"};d.data.inner=m("<div>").css(m.extend({},e)),d.data.outer=m("<div>").css(m.extend({left:"-1000px",overflow:"scroll",position:"absolute",top:"-1000px"},e)).append(d.data.inner).appendTo("body")}return d.data.outer.scrollLeft(1e3).scrollTop(1e3),{height:Math.ceil(d.data.outer.offset().top-d.data.inner.offset().top||0),width:Math.ceil(d.data.outer.offset().left-d.data.inner.offset().left||0)}}function g(l){var e=l.originalEvent;return(!e.axis||e.axis!==e.HORIZONTAL_AXIS)&&!e.wheelDeltaX}window.angular&&(s=window.angular).module("jQueryScrollbar",[]).provider("jQueryScrollbar",function(){var e=o;return{setOptions:function(l){s.extend(e,l)},$get:function(){return{options:s.copy(e)}}}}).directive("jqueryScrollbar",["jQueryScrollbar","$parse",function(r,t){return{restrict:"AC",link:function(l,e,o){var s=t(o.jqueryScrollbar)(l);e.scrollbar(s||r.options).on("$destroy",function(){e.scrollbar("destroy")})}}}])});